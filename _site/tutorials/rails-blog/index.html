<!DOCTYPE html>
<html lang="en">
<!--
    _                                           ___
   / \__      _____  ___  ___  _ __ ___   ___  |_ _|_ __   ___
  / _ \ \ /\ / / _ \/ __|/ _ \| '_ ` _ \ / _ \  | || '_ \ / __|
 / ___ \ V  V /  __/\__ \ (_) | | | | | |  __/  | || | | | (__
/_/   \_\_/\_/ \___||___/\___/|_| |_| |_|\___| |___|_| |_|\___|
  Growing High-Tech Startups in Lexington, Kentucky. #horses
-->
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta property="og:description" content="by Alek Zieba

">
<meta property="og:url" content="http://localhost:4000/tutorials/rails-blog/">
<meta name="author" content="Awesome Inc">
<meta property="og:title" content="An Awesome Rails Tutorial">
<title>An Awesome Rails Tutorial | Awesome Inc U</title>
<link rel="icon" href="/img/favicon.ico">


<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Bootstrap core CSS -->
<link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<!-- External CSS -->
<link href="//fonts.googleapis.com/css?family=Lato:300,700|Exo:300,800" rel="stylesheet" type="text/css">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link href="//cdnjs.cloudflare.com/ajax/libs/cc-icons/1.2.1/css/cc-icons.min.css" rel="stylesheet">
<link href="//cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
<!-- Custom CSS -->
<link href="/css/main.css" rel="stylesheet" type="text/css">
<link href="/css/custom.css" rel="stylesheet" type="text/css">
<link href="/css/jekyll-tutorial.css" rel="stylesheet" type="text/css">
<!-- my ip tracking -->
<script type="text/javascript" src="https://l2.io/ip.js?var=myip"></script>
<!-- Google Analytics -->
<script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-40742716-1', 'auto');
    ga('send', 'pageview', {
        'dimension1':  myip
    });
</script>

        <!-- 
	facebook pixel conversion tracking 
	created on: 5/7/2016
	last updated: 1/6/2017
-->

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window,document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
 fbq('init', '1732394227046919'); 
fbq('track', 'PageView');
</script>
<noscript>
 <img height="1" width="1" 
src="https://www.facebook.com/tr?id=1732394227046919&ev=PageView
&noscript=1"/>
</noscript>
<!-- End Facebook Pixel Code -->
        <script type="text/javascript">
var $zoho=$zoho || {};$zoho.salesiq = $zoho.salesiq || {widgetcode:"77464144f0307e5d43de560d9806d2fdd98dbf1a8dba0fb4a61a9630fe7d7d5c1e92507c13fa0fac71e5ac4fb3822ca1", values:{},ready:function(){}};var d=document;s=d.createElement("script");s.type="text/javascript";s.id="zsiqscript";s.defer=true;s.src="https://salesiq.zoho.com/widget";t=d.getElementsByTagName("script")[0];t.parentNode.insertBefore(s,t);d.write("<div id='zsiqwidget'></div>");
</script>
    </head>
    <body>
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img alt="Awesome Inc U" src="/img/Logo_Horizontal_white.png"></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse navbar-right">
            <ul class="nav navbar-nav">
                <li class="active" ><a href="/blog/">Blog</a></li>
                    <li><a href="/contact/">Contact</a></li>
            </ul>
            <ul class="nav nav-pills navbar-nav navbar-right">
                <li><p class="navbar-btn"><a class="btn btn-default" href="/youth/" role="button">Youth Courses</a></p></li>
                <li><p class="navbar-btn"><a class="btn btn-default" href="/adults/" role="button">Adult Courses</a></p></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>
        <div class="An">
        <div class="container">
    <div class="row">

        <div class="col-sm-8 col-sm-offset-2 blog-main">

          <div class="blog-post">
				<h1 class="blog-post-title">An Awesome Rails Tutorial</h1>
                <p class="blog-post-meta">Feb 06, 2018</p>
				<div class="a2a_kit a2a_kit_size_32 a2a_default_style">
					<a class="a2a_dd" href="https://www.addtoany.com/share"></a>
					<a class="a2a_button_facebook"></a>
					<a class="a2a_button_twitter"></a>
					<a class="a2a_button_linkedin"></a>
				</div>
				<script async src="https://static.addtoany.com/menu/page.js"></script>
                
                <p><p>by Alek Zieba</p>

<p><strong>Part I: The Setup</strong></p>

<p><strong>What We’re Doing</strong></p>

<p>Today we’ll be building the most awesome blog ever from scratch.</p>

<p>We’ll be using the <a href="http://rubyonrails.org/">Ruby on Rails</a> web development framework to do so. The purpose of this tutorial is to show you how awesome Rails is and how easy it is to create something very functional very quickly. Rails is quite notorious for being intimidating to beginners, so if you don’t understand something as I walk you through this tutorial, don’t worry, it’ll most likely make sense at the end.</p>

<p>Before we begin, if you don’t already have Rails installed, I would suggest following the instructions on <a href="http://installrails.com/">InstallRails.com</a>, since they are very easy to follow and will set up almost everything that you could possibly need for Rails development at the beginning. You’ll also want to install the <a href="http://www.postgresql.org/download/">native application</a> for <a href="http://en.wikipedia.org/wiki/PostgreSQL">Postgres</a> (a database platform). If you don’t know whether you have Rails installed, run the following in your computer’s command line:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rails -v
</code></pre></div></div>

<blockquote>
  <p>NOTE: $&gt; indicates we are in the cmd prompt / terminal in your designated directory</p>
</blockquote>

<p>In my case, this returns:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rails 4.1.4
</code></pre></div></div>

<p>So if you get anything that doesn’t look like that, you need to go through the installation process. Since you may have a few large downloads, you can start those now and keep reading for a bit – we’re going to discuss some Rails philosophy first.</p>

<p><strong>How We Build Stuff in Rails</strong></p>

<p>We’ll discuss the inner workings of the blog later, but first, we need to know how Rails projects in general are structured and why its creators chose the framework to be that way.</p>

<p>Rails was built around the philosophy of maintaining a <strong><a href="http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller">Model-View-Controller</a></strong> (MVC) architecture in your project, which means that the code that performs specific tasks <strong>must</strong> be placed in the appropriate spaces that Rails provides for them – these spaces are the <strong>Model</strong>, the <strong>View</strong>, and the <strong>Controller</strong>. <strong>Model</strong> code is for database-level tasks such as validation, <strong>View</strong> code determines what users see in their browsers, and <strong>Controller</strong> code is what connects the <strong>View</strong> and the <strong>Model</strong>. Here’s a diagram that explains this structure:</p>

<p><img src="/img/tutorials/rails-blog/image_0.png" alt="image alt text" /></p>

<p>What does keeping everything separated do for us? Trust me, it keeps your code very DRY (stands for Don’t Repeat Yourself) and easier to maintain, since you know exactly where everything is when you need it.</p>

<p>Again, if anything is confusing, don’t worry, everything will make sense as soon as we start writing code and placing it in the correct spots. The bottom line is this: <strong>everything in Rails needs to be in a very specific location</strong>, and not following the established conventions can cost us a lot of troubleshooting time down the road.</p>

<p>Here’s a rundown of the structure of a Rails project, just so that we’re not scared by it when we create the project – feel free to refer to this at any time:</p>

<p><strong><span style="color:blue">Blue</span> means used a lot.</strong></p>

<p><strong><span style="color:green">Green</span> means handy but not required to make a great project.</strong></p>

<p><strong><span style="color:red">Red</span> means off-limits.</strong></p>

<p><strong><span style="color:gray">Gray</span> means it doesn’t matter if you touch it, it’s not important anyway.</strong></p>

<p><strong><span style="color:blue">app/</span></strong> - Where the bulk of your application’s code is stored.</p>

<ul>
  <li>
    <p><strong><span style="color:blue">assets/</span></strong> - Javascript, CSS, images, fonts, etc.</p>
  </li>
  <li>
    <p><strong><span style="color:blue">controllers/</span></strong> - Where controller code is managed.</p>
  </li>
  <li>
    <p><strong><span style="color:blue">helpers/</span></strong> - Where you can define custom methods to generate HTML for your views.</p>
  </li>
  <li>
    <p><strong><span style="color:blue">mailers/</span></strong> - Where you manage files that send email from your application.</p>
  </li>
  <li>
    <p><strong><span style="color:blue">models/</span></strong> - Where your model validation code is managed.</p>
  </li>
  <li>
    <p><strong><span style="color:blue">views/</span></strong> - Where your HTML everything is located.</p>
  </li>
</ul>

<p><strong><span style="color:red">bin/</span></strong> - Binaries. Don’t touch this. Ever.</p>

<p><strong><span style="color:blue">config/</span></strong> - Where your configuration code is stored. Examples of such configuration is routing (everything having to do with URLs) and database stuff.</p>

<p><strong><span style="color:red">config.ru</span></strong> - Leftover from something off which Rails was built. Don’t touch it.</p>

<p><strong><span style="color:blue">db/</span></strong> - Information about your database is stored here. Such information includes migration files, the current database schema, and seed data.</p>

<p><strong><span style="color:blue">Gemfile</span></strong> - Where external dependencies (<a href="http://en.wikipedia.org/wiki/RubyGems">Gems</a>) are managed.</p>

<p><strong><span style="color:red">Gemfile.lock</span></strong> - Don’t touch this. This is managed by bundler (you’ll see this in a bit).</p>

<p><strong><span style="color:green">lib/</span></strong> - Where external Ruby libraries are placed.</p>

<p><strong><span style="color:blue">log/</span></strong> - Log files for your application.</p>

<p><strong><span style="color:blue">public/</span></strong> - Where static materials that aren’t application assets should be stored.</p>

<p><strong><span style="color:red">Rakefile</span></strong> - Leftover from something that Rails is built off of. Don’t touch it.</p>

<p><strong><span style="color:green">README.rdoc</span></strong> - Where you put instructions for setting up the application if someone else will be reading your code.</p>

<p><strong><span style="color:green">test/</span></strong> - Where your Rails test suite is managed.</p>

<p><strong><span style="color:red">tmp/</span></strong> - Where temporary assets (cache, cookies, etc.) are managed.</p>

<p><strong><span style="color:gray">vendor/</span></strong> - Third-party stuff is supposed to go here, but no one actually uses this folder.</p>

<p>Will you need to know exactly what each of these folders is for? Yes. However, don’t make flashcards just yet, because you’ll remember it through practice – it will become second-nature.</p>

<p><strong>Setting the Stage</strong></p>

<p>You’re going to want to open a few things: your favorite web browser (preferably Chrome or Firefox), your favorite code editor (I would highly recommend <a href="http://www.sublimetext.com/">Sublime Text 2</a>), and the command-line. My personal setup looks like this:</p>

<p><img src="/img/tutorials/rails-blog/image_1.png" alt="image alt text" /></p>

<p>Now, let’s begin by making a new Rails project called “blog”:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rails new blog --database=postgresql
</code></pre></div></div>

<p>This may take a while, since Rails has to bundle a lot of dependencies. Note that by default Rails uses an <a href="http://en.wikipedia.org/wiki/SQLite">SQLite3</a> database instead of a Postgres one, but most Rails deployment options use Postgres, so we might as well get into the habit of making new projects with it, especially since changing database types becomes more tedious the later we put it off. Once it finishes, change your terminal directory to that of your new project:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; cd blog
</code></pre></div></div>

<p>Before we move further, let’s just make sure that our project built correctly. Start Postgres locally (just open the application that came installed with your package, unless you’re on Linux – then it might be more complicated, but if you’re on Linux, you should know how!) and enter one of the following in your command line:</p>

<p>EITHER</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rails server
</code></pre></div></div>

<p>OR</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rails s
</code></pre></div></div>

<p>The second is merely shorthand for the first (“s” stands for “server”). Point your favorite web browser to <a href="http://localhost:3000/">http://localhost:3000/</a> and you should see the following:</p>

<p><img src="/img/tutorials/rails-blog/image_2.png" alt="image alt text" /></p>

<p>Uh oh, looks like we don’t even have a database to work with yet. <strong>Let’s stop the server for a bit by pressing Control-C</strong> (feel free to stop the server at any point, but the Rails server needs to be running for the application to display). Let’s do what the error message says and enter the following in the command line, but after you start your newly-installed Postgres server, open its command line (can usually be done by typing <strong>psql</strong> in any regular command-line prompt), and <a href="http://www.postgresqltutorial.com/postgresql-roles/">create a role under your computer account’s name</a>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rake db:create db:migrate
</code></pre></div></div>

<p>Hopefully our database was created, let’s restart the server:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rails s
</code></pre></div></div>

<p>If we navigate back to <a href="http://localhost:3000/">http://localhost:3000/</a>, we should see the following:</p>

<p><img src="/img/tutorials/rails-blog/image_3.png" alt="image alt text" /></p>

<p>Hallelujah, we got something working this time!</p>

<p>Next, open the file named Gemfile in the project root directory and add the following lines to the bottom of it:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## ./blog/Gemfile
# Link auto detection
gem 'rails_autolink', '~&gt; 1.1.6'
</code></pre></div></div>

<p>This adds a third-party gem – basically the Ruby version of an external library – to our project, and we’ll be making use of this at some point. Gems are absolutely essential to Rails projects whenever we’re doing extreme work with <a href="http://en.wikipedia.org/wiki/Cascading_Style_Sheets">CSS</a> and <a href="http://haml.info/">HAML</a>, but we’re not going to be using much of those in this tutorial. However, you need to know how to install gems to become a fluid Rails developer. Install the gem by stopping the server and running the following:</p>

<p>EITHER</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; bundle update

$&gt; bundle install
</code></pre></div></div>

<p>OR</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; bundle
</code></pre></div></div>

<p>The second option is direct shorthand for the first.</p>

<p><strong>Part II: Getting Down to Town with MVC</strong></p>

<p><strong>The Model</strong></p>

<p>Databases, yay!</p>

<p>In this section, we will configure the database to accept blog post objects and will add some server-side validation to our project so that we have a strong backbone for the rest of our project.</p>

<p>To get started, let’s make a new Model object titled Post with the following command:</p>

<p>$&gt; rails g model Post title content:text views:integer</p>

<p>Here’s what we just said to the computer: Rails, please generate a Model object called Post with a string attribute called title, a text (longer string) attribute called content, and an integer attribute called views. But hold on, how does Rails know that title is a string, when we had to specify the types for the other attributes? It turns out that the default type for a Model object attribute is a string. We could have accomplished the same thing with the following command:</p>

<p><strong><em>DON’T RUN THIS</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rails g model Post title:string content:text views:integer
</code></pre></div></div>

<p>But let’s face it, shorthand is always better. You’ll notice that this command created a few important files in our project, but don’t worry, we’re not going to concern ourselves with all of the files created.</p>

<p>We will edit a few, however, and the first one that we need to visit is <code class="highlighter-rouge">db/migrate/*Timestamp*_create_posts.rb.</code> This is a <strong>database migration file</strong>. Making a database migration file is basically us telling the computer, “Hey Rails, we want to change our database, and how to do it can be found in this new migration file.”  We then <strong>migrate the database</strong> to apply these changes.</p>

<p>Let’s take a look at the database migration file. It’s not too bad to read, since it reads mostly like plain English. The contents of this file were generated by the command that we ran earlier; we could have omitted the attributes in the command, but we would have had to write this file entirely by ourselves. Change this line:</p>

<p><strong><em>Incorrecto</em></strong></p>

<p><code class="highlighter-rouge">t.integer :views</code></p>

<p>to this:</p>

<p><strong><em>Correcto</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>t.integer :views, default: 0
</code></pre></div></div>

<p>This is because by default, all posts should have 0 views, not NULL views, and it’s much easier to increment 0 than it is to increment NULL, which will be important in a bit.</p>

<p>Let’s go ahead and push our changes to the database:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rake db:migrate
</code></pre></div></div>

<p>Remember that if you mess anything up (even seasoned developers do) in your migration files, you can undo the last migration by running the following:</p>

<p><strong><em>ONLY FOR EMERGENCIES</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rake db:rollback
</code></pre></div></div>

<p>Now, we need to add some server-side validation logic to our model object. This is to prevent people from entering posts with blank titles, blank content, or anything else annoying and unblog-like that their devious minds could devise.</p>

<p>The file that controls Post validation is <code class="highlighter-rouge">app/models/post.rb</code>. Right now, it should look like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Post &lt; ActiveRecord::Base

end
</code></pre></div></div>

<p>This file is so empty that I almost feel sad for it. Let’s add the following validation code between those two lines:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>validates_presence_of :title
validates_presence_of :content
</code></pre></div></div>

<p>This will make sure that users haven’t entered blank Post titles nor blank Post content.</p>

<p>But let’s consider another scenario: we don’t want people to enter Posts that have beginning or trailing whitespace neither in the titles nor the contents, because that looks tacky. Let’s add the following after the previous validation lines:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>before_validation :preval
</code></pre></div></div>

<p>This tells the Model that before it validates itself, it needs to run the method called preval. Let’s define preval right below that with the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>private
  def preval
    if self.title
      self.title = self.title.strip
    end
    if self.content
      self.content = self.content.strip
    end
end
</code></pre></div></div>

<p>The strip method for strings removes beginning and trailing whitespace for a string. We put these inside if statements that check if the attribute exists first so that we don’t risk errors involving trying to manipulate NULL values.</p>

<p>That’s pretty much all that we need to do on the Model side, onto visual things!</p>

<p><strong>The View and The Controller</strong></p>

<p>The reason why the View and the Controller are in the same section is because it’s very difficult to work on one without working on the other. Let’s start by creating an interface where users can interact with blog posts. Run the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rails g controller Posts index show
</code></pre></div></div>

<p>This creates a controller called PostsController with two actions (AKA web pages): index and show. Basically, a controller is a file that allows us to specify how the user will interact with the route that they enter in their address bar. To show this, let’s take a look at <code class="highlighter-rouge">app/controllers/posts_controller.rb</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class PostsController &lt; ApplicationController
  def index
  end
  
  def show
  end
end
</code></pre></div></div>

<p>How a controller works is this: the project router receives a URL and then calls the corresponding method of the corresponding controller (we’ll take a look at how to set this up this in a second), and then within the methods of a controller’s file. It is our job to establish variables for the view to use, update the database, or whatever else we need the controller to perform to bridge the gap between the HTML Views and the Model.</p>

<p>Don’t worry if that went over your head, it’ll make sense in a second. Change the index method to the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def index
  @posts = Post.all.order(created_at: :desc)
end
</code></pre></div></div>

<p>Now, we have a variable that the view for the Posts index can use to build itself. But wait a second, how can we use this, do we even have an index HTML page? It turns out that we do. Start the server and point your browser to <a href="http://localhost:3000/posts/index">http://localhost:3000/posts/index</a>:</p>

<p><img src="/img/tutorials/rails-blog/image_4.png" alt="image alt text" /></p>

<p>Well that’s neat, I guess, but there’s just boilerplate code there at the moment. Let’s make use of the variable that we defined in the controller method. Change the contents of <code class="highlighter-rouge">app/views/posts/index.html.erb</code> to the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1&gt;The Best Blog Ever&lt;/h1&gt;
&lt;br/&gt;
&lt;% if @posts.count &gt; 0 %&gt;
  &lt;% @posts.each do |post| %&gt;
    &lt;h2&gt;&lt;%= post.title %&gt;&lt;/h2&gt;
    &lt;h4&gt;&lt;%= post.content %&gt;&lt;/h4&gt;
  &lt;% end %&gt;
&lt;% else %&gt;
  &lt;h2&gt;Darn, looks like we don’t have anything...&lt;/h2&gt;
&lt;% end %&gt;
</code></pre></div></div>

<p>Now, I know what you may be thinking, but first let me say that the .erb appended to the name of this file stands for “Embedded Ruby,” meaning that the HTML that this file gives to the browser is built using the <a href="http://en.wikipedia.org/wiki/ERuby">Embedded Ruby preprocessor</a>. Everything that is between the braces <code class="highlighter-rouge">&lt;% %&gt;</code> is evaluated Ruby code, but nothing is put in the file in its place. Everything between these braces <code class="highlighter-rouge">&lt;%= %&gt;</code>, however, is not only evaluated, but also the string representation of what was evaluated is put in the HTML code in its place.</p>

<p>Since we haven’t created any posts yet, we should expect to see a dismayed message if we point our browsers back to <a href="http://localhost:3000/posts/index">http://localhost:3000/posts/index</a>:</p>

<p><img src="/img/tutorials/rails-blog/image_5.png" alt="image alt text" /></p>

<p>Let’s create a way for us to create new posts, look at each post individually, delete posts, etc. (implement <a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> – Create, Read, Update, and Delete – methods). Let’s start with the first. We’re going to put a form for this in a separate view. Let’s create a method in <code class="highlighter-rouge">app/controllers/posts_controller.rb</code> for this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def new

  @post = Post.new

end
</code></pre></div></div>

<p>Here, the method is called new because we’re making the view in which we can create a new post. Next, create the file <code class="highlighter-rouge">app/views/posts/new.html.erb</code> and fill it with the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1&gt;New Post&lt;/h1&gt;
&lt;ul&gt;
  &lt;% @post.errors.full_messages.each do |msg| %&gt;
    &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
&lt;%= form_for @post do |f| %&gt;
  &lt;%= f.text_field :title %&gt;
  &lt;br/&gt;
  &lt;%= f.text_area :content %&gt;
  &lt;br/&gt;
  &lt;%= f.submit %&gt;
&lt;% end %&gt;
</code></pre></div></div>

<p>Notice the Rails helper method form_for. This is just one of the handy helpers that Rails provides to make Embedded Ruby code to be as condensed and as readable as possible – it’s just Ruby code that generates HTML. Now, you could reasonably expect that pointing your browser to <a href="http://localhost:3000/posts/new">http://localhost:3000/posts/new</a> would bring this up, but because we created our new post interface manually, we also have to define its route manually.</p>

<p>Open config/routes.rb and you should see the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rails.application.routes.draw do

  get 'posts/index'
  get 'posts/show'
  # Lots of comments...
  
end
</code></pre></div></div>

<p>When we first made the Posts controller, the actions that we specified with it were automagically added to <code class="highlighter-rouge">routes.rb</code> (lines 2 and 3). Just so that we have a little bit more control over our application’s routes, let’s modify routes.rb to be the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rails.application.routes.draw do
  controller :posts do
    get '/new_post' =&gt; :new, as: 'new_post'
    get '/post/:id' =&gt; :show, as: 'show_post'
  end
  root 'posts#index'
  # Lots of comments...
end
</code></pre></div></div>

<p>What we’ve done here is defined our routes so that going to <a href="http://localhost:3000/">http://localhost:3000/</a> brings us to the index page, <a href="http://localhost:3000/new_post">http://localhost:3000/new_post</a> brings us to the new post page, etc.. The ‘as’ value of the hash at the end of the first two new routes is the name that we would like for the route to have if we were to refer to it via Ruby it in a file; for example, if we were to make a link to somewhere else on our website, instead of using <code class="highlighter-rouge">/post/#{id}</code> or something involving hardcoded strings as the hyperlink reference, we can just use, in our case,<code class="highlighter-rouge"> show_post_path(id: id)</code>. As a reference, the general syntax for what we just did is this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>controller :controller_name do
  [HTTP method name] '/custom_path_name' =&gt; :method_name, as: 'name_called_in_programming'
  # Do this however much you want...
end
</code></pre></div></div>

<p>Now, let’s go to <a href="http://localhost:3000/new_post">http://localhost:3000/new_post</a>. We should see the following:</p>

<p><img src="/img/tutorials/rails-blog/image_6.png" alt="image alt text" /></p>

<p>Rails has detected that we have created a form to create something new, but we haven’t defined a method to save it into the database.</p>

<p>Let’s fix this by defining a new method in <code class="highlighter-rouge">app/controllers/posts_controller.rb</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def create
  @post = Post.new(title: params[:post][:title], content: params[:post][:content])
  if @post.save
    flash[:notice] = 'Successfully created a new post!'
    redirect_to root_path
  else
    flash[:alert] = 'Something went awry...'
    render :new
  end
end
</code></pre></div></div>

<p>Notice the use of the flash object. The flash object is omnipresent in Rails and is used to store information that is meant to the <strong>flashed</strong> to the users (you can easily obtain its contents in a view). Next, let’s add a route for this method like so:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>controller :posts do
  # ...
  post '/create_post' =&gt; :create, as: 'create_post'
end
</code></pre></div></div>

<p>Note that we don’t have to create a view for this action, because we’re always either redirecting or rendering another view (look back at create). Also, there is an abundance of the word “post” in this code, let me explain that: “posts” refers to the controller, the first “post” refers to the HTTP method POST (something completely different from a blog post), and then the rest of the line refers back to blog posts.</p>

<p>One last thing that we need to do to get this to work: change the form_for line in the new posts view to the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;%= form_for @post, url: create_post_path do |f| %&gt;
</code></pre></div></div>

<p>Now, if we go back to <a href="http://localhost:3000/new_post">http://localhost:3000/new_post</a>, we should see a form:</p>

<p><img src="/img/tutorials/rails-blog/image_7.png" alt="image alt text" /></p>

<p>And if we try to submit it with anything blank, we get error messages:</p>

<p><img src="/img/tutorials/rails-blog/image_8.png" alt="image alt text" /></p>

<p>But wait a second, there was something involving flashing an error message defined in the create method that didn’t appear! We can make this appear in app/views/layouts/application.html.erb. Right now, that file looks like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>Blog<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;</span><span class="err">%=</span> <span class="na">stylesheet_link_tag</span>    <span class="err">'</span><span class="na">application</span><span class="err">',</span> <span class="na">media:</span> <span class="err">'</span><span class="na">all</span><span class="err">',</span> <span class="err">'</span><span class="na">data-turbolinks-track</span><span class="err">'</span> <span class="err">=</span><span class="nt">&gt;</span> true %&gt;
  <span class="nt">&lt;</span><span class="err">%=</span> <span class="na">javascript_include_tag</span> <span class="err">'</span><span class="na">application</span><span class="err">',</span> <span class="err">'</span><span class="na">data-turbolinks-track</span><span class="err">'</span> <span class="err">=</span><span class="nt">&gt;</span> true %&gt;
  <span class="nt">&lt;</span><span class="err">%=</span> <span class="na">csrf_meta_tags</span> <span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;</span><span class="err">%=</span> <span class="na">yield</span> <span class="err">%</span><span class="nt">&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>This is actually one of the most important files in your entire Rails project because it is common to every one of your pages. The line <code class="highlighter-rouge">&lt;%= yield %&gt;</code> means replace that line with whatever HTML is created by the view that you called. We can display application-wide error / notification messages by adding the following lines above the yield line:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;% if flash[:alert] %&gt;
  &lt;p&gt;Alert: &lt;%= flash[:alert] %&gt;&lt;/p&gt;
&lt;% end %&gt;
&lt;% if flash[:notice] %&gt;
  &lt;p&gt;Notice: &lt;%= flash[:notice] %&gt;&lt;/p&gt;
&lt;% end %&gt;
</code></pre></div></div>

<p>Now, let’s try submitting a legitimate post:</p>

<p><img src="/img/tutorials/rails-blog/image_9.png" alt="image alt text" /></p>

<p>Awesome, not only did our database shenanigans work, but our notice system did, as well!</p>

<p>But, we’ve only completed one of the CRUD operations. Let’s knock out all of the others in one fell swoop, edit <code class="highlighter-rouge">routes.rb</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>controller :posts do
  # Stuff we already had…
  get '/post/:id/edit' =&gt; :edit, as: 'edit_post'
  patch '/post/:id/update' =&gt; :update, as: 'update_post'
  delete '/post/:id/delete' =&gt; :destroy, as: 'destroy_post'
end
</code></pre></div></div>

<p>Change the show method in the Posts controller (<code class="highlighter-rouge">app/controllers/posts_controller.rb</code>) to the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def show
  @post = Post.where(id: params[:id]).first
  if !@post
    redirect_to root_path
  else
    @post.update(views: @post.views+1)
  end
end
</code></pre></div></div>

<p>And add the following methods to that file, as well:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def edit
  @post = Post.where(id: params[:id]).first
  if !@post
    redirect_to root_path
  end
end
def update
  @post = Post.where(id: params[:id]).first
  if !@post
    redirect_to root_path
  else
    if @post.update(title: params[:post][:title], content: params[:post][:content])
      flash[:notice] = 'Successfully updated the post!'
      redirect_to show_post_path(id: @post.id)
    else
      flash[:alert] = 'Couldn’t edit the post...'
      render :edit
    end
  end
end
def destroy
  @post = Post.where(id: params[:id]).first
  if !@post
    redirect_to root_path
  else
    if @post.destroy
      flash[:notice] = 'Successfully deleted the post!'
      redirect_to root_path
    else
      flash[:alert] = 'Couldn’t delete the post...'
      redirect_to show_post_path(id: @post.id)
    end
  end
end
</code></pre></div></div>

<p>Next, we need to create views for show and edit, so create <code class="highlighter-rouge">app/views/posts/show.html.erb</code> first and put the following inside it:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1&gt;&lt;%= @post.title %&gt;&lt;/h1&gt;
&lt;p&gt;Views: &lt;%= @post.views %&gt;&lt;/p&gt;
&lt;p&gt;&lt;%= auto_link(simple_format(@post.content)) %&gt;&lt;/p&gt;
&lt;%= link_to 'Back to Home', root_path %&gt;
</code></pre></div></div>

<p>Notice the use of the <code class="highlighter-rouge">link_to</code> helper method. This takes the parameters 1) string to display 2) URL/path to point to. In addition, <code class="highlighter-rouge">auto_link</code> is not even a helper method provided by Rails – it came from the gem that we installed at the beginning of this tutorial (it detects whether a URL is included in the text it’s given and creates hyperlinks appropriately). (simple_format is a Rails helper method that makes it so that user-inputted line breaks appear.)  Now, create <code class="highlighter-rouge">app/views/posts/edit.html.erb</code> and put the following inside it:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1&gt;Edit Post&lt;/h1&gt;
&lt;ul&gt;
  &lt;% @post.errors.full_messages.each do |msg| %&gt;
    &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;
&lt;%= form_for @post, url: update_post_path, method: :patch do |f| %&gt;
  &lt;%= f.text_field :title %&gt;
  &lt;br/&gt;
  &lt;%= f.text_area :content %&gt;
  &lt;br/&gt;
  &lt;%= f.submit %&gt;
&lt;% end %&gt;
&lt;%= link_to 'Back to Home', root_path %&gt;
</code></pre></div></div>

<p>Finally, let’s go back to the index page and change things around a bit, so we have a navigation system for our site:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1&gt;The Best Blog Ever&lt;/h1&gt;
&lt;%= link_to 'New Post', new_post_path %&gt;
&lt;br/&gt;
&lt;% if @posts.count &gt; 0 %&gt;
  &lt;% @posts.each do |post| %&gt;
    &lt;h2&gt;&lt;%= link_to post.title, show_post_path(id: post.id) %&gt;&lt;/h2&gt;
    &lt;h4&gt;&lt;%= truncate post.content, length: 50 %&gt;&lt;/h4&gt;
    &lt;%= link_to 'Edit Post', edit_post_path(id: post.id) %&gt;
    &lt;%= link_to 'Delete Post', destroy_post_path(id: post.id), method: :delete %&gt;
  &lt;% end %&gt;
&lt;% else %&gt;
  &lt;h2&gt;Darn, looks like we don’t have anything...&lt;/h2&gt;
&lt;% end %&gt;
</code></pre></div></div>

<p>Notice that the past two code snippets have allowed us to change the HTTP method associated with the respective action (PATCH and DELETE) extremely easily. Also, the Rails helper method truncate is used to limit how much the user can see of our posts without clicking on the post itself (50 characters). Now, you should be able to navigate to all parts of the site from the home page and perform all of the CRUD operations associated with blog posts.</p>

<p><strong>The Console</strong></p>

<p>You can run any of the database commands that we used in our controller code without having to go through a view. You can do this by going through the Rails console. To open it, run:</p>

<p>EITHER</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rails console
</code></pre></div></div>

<p>OR</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; rails c
</code></pre></div></div>

<p>The second is shorthand for the first. Once this new terminal opens, you can make a new blog post like so:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; p = Post.new(title: 'Cakes are Great', content: 'They are floury, sugary goodness from heaven.')
$&gt; p.save
</code></pre></div></div>

<p>Or you could even destroy all of your posts in one fell swoop:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; Post.destroy_all
</code></pre></div></div>

<p>Type <strong>quit</strong> in the console to exit back to the system command line</p>

<p><strong>Wrapping Up</strong></p>

<p>Although the blog that we’ve created may not be something that we would want our artsy friends to be seeing, we’ve created something that works.</p>

<p>Just so the blog doesn’t look too basic, however, copy and paste the following into the bottom of <code class="highlighter-rouge">app/assets/stylesheets/application.css</code>, below the comments (<strong>don’t delete the comments</strong>, those are important!):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>body {
  text-align: center;
  font-family: cursive;
  background: rgba(248,80,50,1);
  background: -moz-linear-gradient(left, rgba(248,80,50,1) 0%, rgba(241,111,92,1) 0%, rgba(231,56,39,1) 100%);
  background: -webkit-gradient(left top, right top, color-stop(0%, rgba(248,80,50,1)), color-stop(0%, rgba(241,111,92,1)), color-stop(100%, rgba(231,56,39,1)));
  background: -webkit-linear-gradient(left, rgba(248,80,50,1) 0%, rgba(241,111,92,1) 0%, rgba(231,56,39,1) 100%);
  background: -o-linear-gradient(left, rgba(248,80,50,1) 0%, rgba(241,111,92,1) 0%, rgba(231,56,39,1) 100%);
  background: -ms-linear-gradient(left, rgba(248,80,50,1) 0%, rgba(241,111,92,1) 0%, rgba(231,56,39,1) 100%);
  background: linear-gradient(to right, rgba(248,80,50,1) 0%, rgba(241,111,92,1) 0%, rgba(231,56,39,1) 100%);
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f85032', endColorstr='#e73827', GradientType=1 );
}
h1 {
  font-weight: bolder;
  font-size: 4em;
  margin-bottom: 0em;
}
h2 {
  margin-top: 3em;
}
</code></pre></div></div>

<p>This makes our blog look like this:</p>

<p><img src="/img/tutorials/rails-blog/image_10.png" alt="image alt text" /></p>

<p>In conclusion, the point of this tutorial was to provide you with the tools and terminology required to pursue Rails further. In fact, this tutorial hardly scratches the surface of Rails – for example, <a href="http://www.amazon.com/Rails-Test-Prescriptions-Pragmatic-Programmers/dp/1934356646">there have been books written solely about how to operate the Rails testing suite</a>.</p>

<p>I hope that I’ve given you a glimpse of what’s possible with Rails and how easy it is to do it. I would highly recommend trying to build a commenting system (you might want to read about <a href="http://guides.rubyonrails.org/association_basics.html">Rails database associations</a> first, though)!</p>

<p>You can find the code for this project <a href="https://github.com/ainc/rails-blog">here</a>. If this tutorial made you interested in Rails, I would highly recommend doing the well-thought-out <a href="http://railsforzombies.org/">Rails for Zombies</a> course and watching <a href="http://code.tutsplus.com/tutorials/the-intro-to-rails-screencast-i-wish-i-had--net-22191">the best video crash-course into Rails</a> that I’ve seen thus far, and if you want to sink your teeth into Rails even more, there isn’t a better learning resource than <a href="http://www.amazon.com/Agile-Development-Rails-Facets-Ruby/dp/1937785564">Agile Web Development with Rails 4</a>.</p>

<p>~ Alek</p>

</p>
            </div>
        </div><!-- /.blog-main -->

     </div><!-- /.row -->
</div>
        </div>
        <!-- check if page is meant to have press footer, if so, add this and take away margin top style in footer -->

<footer ><!-- h/t to http://bootsnipp.com/snippets/featured/bootstrap-3-footer -->    
    <div class="container text-center">
        <div class="row">
            <div class="col-md-4 hidden-xs">
                <form action="//awesomeinc.us2.list-manage.com/subscribe/post?u=5114422b2183673d50186748d&amp;id=159107e690" method="POST">
                    <div class="form-group">
                        <input type="email" name="email" placeholder="Email Address" class="form-control input-md">
                    </div>
                    <button class="btn btn-info btn-lg" type="submit"> Subscribe to Newsletter </button>
                </form>
                <hr class="visible-xs-block visible-sm-block">
            </div>
            <div class="col-md-8">
                <div class="col-md-3 col-xs-3">
                    <a href="https://www.facebook.com/awesomeincorporated" target="_blank"><i class="fa fa-facebook-square fa-3x social-fb"></i></a>
                </div>
                <div class="col-md-3 col-xs-3">
                    <a href="https://twitter.com/awesome_inc"  target="_blank"><i class="fa fa-twitter-square fa-3x social-tw"></i></a>
                </div>
                <div class="col-md-3 col-xs-3">
                    <a href="https://plus.google.com/+AwesomeincOrgLex"  target="_blank"><i class="fa fa-google-plus-square fa-3x social-gp"></i></a>
                </div>
                <div class="col-md-3 col-xs-3">
                    <a href="mailto:info@awesomeincu.com"  target="_blank"><i class="fa fa-envelope-square fa-3x social-em"></i></a>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-lg-4">
                <div class="col-xs-6">
                    <ul class="nav nav-pills nav-stacked">
                        <li><a href="/about/">About us</a></li>
                        <li><a href="/blog/">Blog</a></li>
                        <li> <a href="/faq/">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-xs-6">
                    <ul class="nav nav-pills nav-stacked">
                        <li><a href="/instructors/">Instructors</a></li>
                        <li><a href="/alumni/">Alumni</a></li>
                        <li><a href="/careers/">Careers</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="col-xs-6">
                    <ul class="nav nav-pills nav-stacked">
                        <li><a href="/calendar/">Calendar</a></li>
                        <li><a href="/tutorials/">Tutorials</a></li>
                        <li><a href="/notes/">Course Notes</a></li>
                    </ul>
                </div>
                <div class="col-xs-6">
                    <ul class="nav nav-pills nav-stacked">
                        <li><a href="/academy/">Academy</a></li>
                        <li><a href="/bootcamp/">Bootcamp</a></li>
                        <li><a href="/weekofcode/">Week of Code</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="col-xs-6">
                    <ul class="nav nav-pills nav-stacked">
                        <li><a href="https://www.awesomeinc.org"  target="_blank">Awesome Inc</a></li>
                        <li><a href="https://fellowship.awesomeinc.org"  target="_blank">Awesome Fellowship</a></li>
                        <li><a href="http://www.apaxsoftware.com"  target="_blank">APAX Software</a></li>
                    </ul>
                </div>
                <div class="col-xs-6">
                    <ul class="nav nav-pills nav-stacked">
                        <li><a href="/press/">Press</a></li>
                        <li><a href="/terms/">Terms of Service</a></li>
                        <li><a href="/privacy/">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-lg-12">
                <ul class="nav nav-pills nav-justified">
                    <li><a href="https://www.awesomeinc.org"  target="_blank">© 2017 Awesome Inc U</a></li>
                    <li><a href="#">Back to top</a></li>
                </ul>
            </div>
        </div>
    </div><!-- /.container -->
</footer>


        <!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="//getbootstrap.com/assets/js/ie10-viewport-bug-workaround.js"></script>
<script src="/js/parallax.js"></script>
<script src="/js/accordion.js"></script>
<script src="/js/main.js"></script>
<script src="/js/jquery.isotope.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>


        
    </body>
</html>
